(this["webpackJsonpgoit-react-hw-02-phonebook"]=this["webpackJsonpgoit-react-hw-02-phonebook"]||[]).push([[4],{151:function(e,t,r){},152:function(e,t,r){"use strict";r.r(t);var n,c=r(0),a=r.n(c),u=r(32),o=r.n(u),s=r(5),i=r(15),l=r(6),f=r(178),d=r(179),j=r(180),b=r(181),h=r(174),p=r(25),O=r(34),g=r(26),x=Object(g.a)(O.b)(n||(n=Object(p.a)(["\n  font-size: 16px;\n  text-decoration: none;\n  color: #ffffff;\n"]))),v=r(2);function m(){var e=Object(i.c)(l.b.getIsLoggedIn);return Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{children:[Object(v.jsx)(h.a,{color:"inherit",children:Object(v.jsx)(x,{to:"/",children:"Main Page"})}),e&&Object(v.jsx)(h.a,{color:"inherit",children:Object(v.jsx)(x,{to:"/contacts",children:"Contacts"})})]})})}var k,w,y,I=r(89),C=r.n(I),L=g.a.span(k||(k=Object(p.a)(["\n  font-size: 16px;\n"]))),z=g.a.span(w||(w=Object(p.a)(["\n  margin-right: 5px;\n  font-size: 16px;\n  font-weight: 500;\n"])));function D(){var e=Object(i.b)(),t=Object(i.c)(l.b.getUserEmail);return Object(v.jsxs)("div",{children:[Object(v.jsx)(z,{children:t}),Object(v.jsx)(C.a,{}),Object(v.jsx)(h.a,{color:"inherit",type:"button",onClick:function(){e(l.a.logOut())},children:Object(v.jsx)(L,{children:"LogOut"})})]})}var T=Object(g.a)(O.b)(y||(y=Object(p.a)(["\n  font-size: 16px;\n  text-decoration: none;\n  color: #ffffff;\n"])));function U(){return Object(v.jsxs)("ul",{children:[Object(v.jsx)(h.a,{color:"inherit",children:Object(v.jsx)(T,{to:"/users/login",children:"Login"})}),Object(v.jsx)(h.a,{color:"inherit",children:Object(v.jsx)(T,{to:"/users/signup",children:"SignUp"})})]})}var E=Object(f.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));function V(){var e=E(),t=Object(i.c)(l.b.getIsLoggedIn);return Object(v.jsx)("div",{className:e.root,children:Object(v.jsx)(d.a,{position:"static",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a,{variant:"h6",className:e.title,children:Object(v.jsx)(m,{})}),t?Object(v.jsx)(D,{}):Object(v.jsx)(U,{})]})})})}var W=r(37),A=r(56),S=["children","redirectTo"];function F(e){var t=e.children,r=e.redirectTo,n=void 0===r?"/":r,c=Object(A.a)(e,S),a=Object(i.c)(l.b.getIsLoggedIn);return Object(v.jsx)(s.b,Object(W.a)(Object(W.a)({},c),{},{children:a?t:Object(v.jsx)(s.a,{to:n})}))}var P=["children","restricted","redirectTo"];function R(e){var t=e.children,r=e.restricted,n=void 0!==r&&r,c=e.redirectTo,a=void 0===c?"/":c,u=Object(A.a)(e,P),o=Object(i.c)(l.b.getIsLoggedIn)&&n;return Object(v.jsx)(s.b,Object(W.a)(Object(W.a)({},u),{},{children:o?Object(v.jsx)(s.a,{to:a}):t}))}var B=r(87),N=Object(c.lazy)((function(){return r.e(2).then(r.bind(null,215))})),G=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(6)]).then(r.bind(null,216))})),J=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(3)]).then(r.bind(null,217))})),M=Object(c.lazy)((function(){return Promise.all([r.e(8),r.e(1)]).then(r.bind(null,214))}));var q=function(){var e=Object(i.b)();return Object(c.useEffect)((function(){e(l.a.fetchCurrentUser())}),[e]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(V,{}),Object(v.jsx)(s.d,{children:Object(v.jsxs)(c.Suspense,{fallback:Object(v.jsx)(B.a,{}),children:[Object(v.jsx)(R,{path:"/",exact:!0,children:Object(v.jsx)(N,{})}),Object(v.jsx)(R,{path:"/users/signup",restricted:!0,children:Object(v.jsx)(G,{})}),Object(v.jsx)(R,{path:"/users/login",restricted:!0,redirectTo:"/contacts",children:Object(v.jsx)(J,{})}),Object(v.jsx)(F,{path:"/contacts",redirectTo:"/users/login",children:Object(v.jsx)(M,{})}),Object(v.jsx)(s.a,{to:"/"})]})})]})},H=r(55),K=r(14),Q=r(31),X=r(49),Y=r(91),Z=r.n(Y),$=(r(150),r(68)),_=r(42),ee=[].concat(Object(H.a)(Object(K.d)({serializableCheck:{ignoredActions:[Q.a,Q.f,Q.b,Q.c,Q.d,Q.e]}})),[_.a]);var te={key:"auth",storage:Z.a,whiteList:["token"]},re=Object(K.a)({reducer:{auth:Object(Q.g)(te,X.a),contacts:$.b},middleware:ee,devTools:!1}),ne=Object(Q.h)(re),ce=re,ae=r(92);r(151);o.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(i.a,{store:ce,children:Object(v.jsx)(ae.a,{loading:null,persistor:ne,children:Object(v.jsx)(O.a,{children:Object(v.jsx)(q,{})})})})}),document.getElementById("root"))},24:function(e,t,r){"use strict";r.r(t),r.d(t,"fetchContacts",(function(){return d})),r.d(t,"fetchAddContact",(function(){return j})),r.d(t,"fetchDeleteContact",(function(){return b}));var n=r(7),c=r.n(n),a=r(19),u=r(14),o=r(22),s=r.n(o),i=function(){var e=Object(a.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/contacts");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/contacts",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("/contacts/".concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=Object(u.b)("contacts/fetchContacts",function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,i();case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),j=Object(u.b)("contacts/addContact",function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,l(t);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),b=Object(u.b)("contacts/deleteContact",function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,f(t);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}())},49:function(e,t,r){"use strict";var n,c=r(8),a=r(14),u=r(6),o=Object(a.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,error:null},extraReducers:(n={},Object(c.a)(n,u.a.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.error=null})),Object(c.a)(n,u.a.register.pending,(function(e){e.error=null})),Object(c.a)(n,u.a.register.rejected,(function(e,t){t.payload?e.error=t.payload.errors.message:e.error=t.error.message})),Object(c.a)(n,u.a.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.error=null})),Object(c.a)(n,u.a.logIn.pending,(function(e){e.error=null})),Object(c.a)(n,u.a.logIn.rejected,(function(e,t){t.payload?e.error=t.payload.errors.message:e.error=t.error.message})),Object(c.a)(n,u.a.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.error=null})),Object(c.a)(n,u.a.logOut.pending,(function(e){e.error=null})),Object(c.a)(n,u.a.logOut.rejected,(function(e,t){e.error=t.error.message})),Object(c.a)(n,u.a.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),n)});t.a=o.reducer},6:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return c}));var n={};r.r(n),r.d(n,"register",(function(){return j})),r.d(n,"logIn",(function(){return b})),r.d(n,"logOut",(function(){return h})),r.d(n,"fetchCurrentUser",(function(){return p})),r.d(n,"default",(function(){return O}));var c={};r.r(c),r.d(c,"getIsLoggedIn",(function(){return g})),r.d(c,"getUserName",(function(){return x})),r.d(c,"getUserEmail",(function(){return v})),r.d(c,"getToken",(function(){return m})),r.d(c,"getError",(function(){return k}));var a=r(7),u=r.n(a),o=r(19),s=r(22),i=r.n(s),l=r(14);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var f=function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},d=function(){i.a.defaults.headers.common.Authorization=""},j=Object(l.b)("auth/register",function(){var e=Object(o.a)(u.a.mark((function e(t,r){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/signup",t);case 4:return c=e.sent,a=c.data,f(a.token),e.abrupt("return",a);case 10:if(e.prev=10,e.t0=e.catch(1),e.t0.response){e.next=14;break}throw new Error("Register failed");case 14:return e.abrupt("return",n(e.t0.response.data));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}()),b=Object(l.b)("auth/login",function(){var e=Object(o.a)(u.a.mark((function e(t,r){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/login",t);case 4:return c=e.sent,a=c.data,f(a.token),e.abrupt("return",a);case 10:if(e.prev=10,e.t0=e.catch(1),e.t0.response){e.next=14;break}throw new Error("LogIn failed");case 14:return e.abrupt("return",n(e.t0.response.data));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}()),h=Object(l.b)("auth/logout",function(){var e=Object(o.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/logout");case 4:d(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()),p=Object(l.b)("auth/refresh",function(){var e=Object(o.a)(u.a.mark((function e(t,r){var n,c,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getState(),null!==(c=n.auth.token)){e.next=4;break}return e.abrupt("return",r.rejectWithValue());case 4:return f(c),e.prev=5,e.next=8,i.a.get("/users/current");case 8:return a=e.sent,o=a.data,e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r.rejectWithValue());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),O={register:j,logOut:h,logIn:b,fetchCurrentUser:p},g=function(e){return e.auth.isLoggedIn},x=function(e){return e.auth.user.name},v=function(e){return e.auth.user.email},m=function(e){return e.auth.token},k=function(e){return e.auth.error};r(49)},68:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n,c=r(8),a=r(55),u=r(14),o=r(24),s="Error",i="Loading",l=Object(u.c)({name:"contacts",initialState:{items:[],filter:"",status:null,isLoading:!1,isDeleting:!1,error:null},reducers:{changeFilter:function(e,t){e.filter=t.payload}},extraReducers:(n={},Object(c.a)(n,o.fetchContacts.fulfilled,(function(e,t){e.items=t.payload,e.status=null,e.error=null})),Object(c.a)(n,o.fetchContacts.pending,(function(e){e.status=i,e.error=null})),Object(c.a)(n,o.fetchContacts.rejected,(function(e){e.status=null,e.error=s})),Object(c.a)(n,o.fetchAddContact.fulfilled,(function(e,t){e.items=[].concat(Object(a.a)(e.items),[t.payload]),e.error=null,e.status=null,e.isLoading=!1})),Object(c.a)(n,o.fetchAddContact.pending,(function(e){e.error=null,e.status=i,e.isLoading=!0})),Object(c.a)(n,o.fetchAddContact.rejected,(function(e){e.error=s,e.status=null,e.isLoading=!1})),Object(c.a)(n,o.fetchDeleteContact.fulfilled,(function(e,t){e.items=e.items.filter((function(e){return e.id!==t.payload})),e.status=null,e.error=null,e.isDeleting=!1})),Object(c.a)(n,o.fetchDeleteContact.pending,(function(e){e.status=i,e.error=null,e.isDeleting=!0})),Object(c.a)(n,o.fetchDeleteContact.rejected,(function(e){e.status=null,e.error=s,e.isDeleting=!1})),n)}),f=l.actions.changeFilter;t.b=l.reducer},87:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n,c=r(90),a=r.n(c),u=r(25),o=r(26).a.div(n||(n=Object(u.a)(["\n  position: absolute;\n  top: 48%;\n  left: 46%;\n  height: 100vh;\n"]))),s=r(2);function i(){return Object(s.jsx)(o,{children:Object(s.jsx)(a.a,{type:"ThreeDots",color:"#3F51B5",height:100,width:100,timeout:1e3})})}}},[[152,5,7]]]);
//# sourceMappingURL=main.7883e87b.chunk.js.map